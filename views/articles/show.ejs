<%- include('header.ejs') %>

    <div class="container article">
        <h1 class="mb-1"><%= article.title %></h1>
        <div class="text-muted mb-2"><%= article.createdAt.toLocaleDateString() %></div>
        <a href="/" class="btn btn-secondary">All Articles</a>
        <a href="/articles/edit/<%= article.id %>" class="btn btn-info">Edit</a>

        <div>
            <%= article.markdown %>
        </div>

        <div>
            <button id="like" onclick="liked()">
                <i class="fa fa-thumbs-up"></i>
                <span class="icon">Like</span>
            </button>
        </div>

        <!--Comments form-->
        <div class="comment-form">
            <h5 class="comment-form-header">Leave a comment:</h5>
            <div class="comment-form-body">
                <form action="/articles/<%= article.id %>?_method=PUT" method="post">
                    <input type="hidden" name="article-id" value="<%= article.id %>"/>
                    <div class="form-group">
                        <input class="form-control" name="name"/>
                    </div>
                    
                    <div class="form-group">
                        <textarea class="form-control" name="comment" id="comment" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
            <div>
                <h2>Comments:</h2>
                <%= article.comment %>
                <p>--- <%= article.name %></p>
            </div>
        </div>

        <script>
            function liked() {
                var element = document.getElementById("like");
                element.classList.toggle("liked");
            }
        </script>
        <!--<script>
            function doComment(form) {
                $.ajax({
                    url: "/do-comment",
                    method: "post",
                    data: {username: form.username.value, comment: form.comment.value, article_id: form.article-slug.value},
                    success: function (response) {
                        alert(response);
                    }
                })
                return false;
            }
        </script>-->
    </div>
</body>
</html>